<!DOCTYPE html>
<html>
<head>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
  html, body {
    height: 100%;
    margin: 0;
  }

  body {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    background-color: #f4f4f4;
    color: #222;
    font-family: 'Inter', sans-serif;
    transition: filter 320ms ease;
  }

  .content {
    transition: filter 320ms ease, opacity 320ms ease;
  }

  body.blurred .content {
    filter: blur(6px) saturate(.95) contrast(.98);
    pointer-events: none;
  }

  h1 { font-weight: 600; }

  .nav-button {
    position: fixed;
    top: 22px;
    left: 22px;
    width: 56px;
    height: 56px;
    border-radius: 20px;
    border: none;
    background-color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0px 9px 27px -5px rgba(0,0,0,0.2);
    cursor: pointer;
    padding: 0;
    z-index: 999;
  }

  .nav-button:hover,
  .nav-button:active { transform: none; box-shadow: 0px 9px 27px -5px rgba(0,0,0,0.2); }

  .nav-button svg {
    width: 28px;
    height: 28px;
    will-change: transform;
    display: block;
  }

  .nav-button[aria-busy="true"] {
    outline: 2px solid rgba(60,60,60,0.06);
  }
</style>
</head>

<body>

<!-- local uploaded file path included as requested -->
<button class="nav-button" aria-label="Back" data-screenshot-url="/mnt/data/Screenshot 2025-11-17 at 3.51.48 PM.png" aria-busy="false">
  <svg id="spin-svg" width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M25.601 10.236C28.4282 10.236 30.72 7.9449 30.72 5.11872C30.72 2.29254 28.4282 0.00146484 25.601 0.00146484C22.7739 0.00146484 20.4821 2.29254 20.4821 5.11872C20.4821 7.9449 22.7739 10.236 25.601 10.236Z" fill="#3C3C3C"/>
    <path d="M5.11902 30.7124C7.94617 30.7124 10.238 28.4213 10.238 25.5952C10.238 22.769 7.94617 20.4779 5.11902 20.4779C2.29186 20.4779 0 22.769 0 25.5952C0 28.4213 2.29186 30.7124 5.11902 30.7124Z" fill="#3C3C3C"/>
    <path d="M30.7193 25.5952C30.7193 25.4257 30.7193 25.259 30.6955 25.0922C30.6955 25.0578 30.6955 25.026 30.6955 24.9916C30.15 20.2026 23.2646 15.8055 17.9337 15.3634C17.9337 15.3634 23.54 17.5209 20.9289 23.5329C20.9103 23.5779 20.8891 23.6229 20.8732 23.6653C20.8574 23.7076 20.8494 23.7182 20.8388 23.7474C20.608 24.3379 20.4894 24.9664 20.4893 25.6005C20.487 26.3549 20.6521 27.1004 20.9727 27.7833C21.2932 28.4663 21.7612 29.0697 22.343 29.5502C22.5979 29.7578 22.8709 29.942 23.1587 30.1009C23.4521 30.2583 23.7598 30.3877 24.0776 30.4874C24.844 30.7261 25.6557 30.7813 26.4474 30.6485C27.239 30.5157 27.9883 30.1987 28.6348 29.723C29.2813 29.2474 29.8068 28.6264 30.1689 27.9102C30.531 27.1941 30.7195 26.4029 30.7193 25.6005V25.5952Z" fill="#3C3C3C"/>
    <path d="M9.80356 7.18341C9.82474 7.1384 9.84328 7.0934 9.86182 7.05104C9.88036 7.00869 9.883 6.9981 9.89624 6.96898C10.1684 6.26817 10.2827 5.51603 10.2311 4.76605C10.1795 4.01607 9.96321 3.28666 9.59765 2.6297C9.23209 1.97275 8.72622 1.40437 8.11601 0.965C7.50581 0.525628 6.80627 0.22605 6.06712 0.0875704C5.32797 -0.0509097 4.56737 -0.0248895 3.83942 0.163779C3.11147 0.352447 2.43405 0.69913 1.85532 1.17917C1.27659 1.65922 0.810772 2.26083 0.490993 2.94123C0.171214 3.62164 0.00532578 4.36412 0.00512695 5.11587C0.00512695 5.2853 0.00512655 5.45208 0.0316088 5.61886C0.0316088 5.65327 0.0316096 5.68504 0.0448507 5.71945C0.574496 10.5084 7.45988 14.9056 12.804 15.3477C12.7987 15.3583 7.19241 13.1954 9.80356 7.18341Z" fill="#3C3C3C"/>
  </svg>
</button>

<main class="content">
  <h1>Something is brewing.</h1>
</main>

<script>
(function () {
  const svg = document.getElementById('spin-svg');
  const btn = svg.closest('.nav-button');

  // preserved uploaded-file local path (provided)
  const screenshotUrl = btn.dataset.screenshotUrl || '/mnt/data/Screenshot 2025-11-17 at 3.51.48 PM.png';

  // state
  let rafId = null;
  let startTime = null;
  let startAngle = 0;

  // animation settings (entire animation lasts exactly DURATION ms)
  const DURATION = 2000;        // ms (2 seconds total)
  const TOTAL_ROTATIONS = 3;    // how many full rotations over the duration (tweakable)

  // easing: easeInOutCubic
  function easeInOutCubic(t) {
    return t < 0.5
      ? 4 * t * t * t
      : 1 - Math.pow(-2 * t + 2, 3) / 2;
  }

  // render frame for time-based eased animation
  function frame(now) {
    if (!startTime) startTime = now;
    const elapsed = now - startTime;
    const clamped = Math.min(elapsed, DURATION);
    const progress = clamped / DURATION; // 0..1

    // eased progress 0..1 (accel then decel)
    const eased = easeInOutCubic(progress);

    // compute angle
    const angle = (startAngle + TOTAL_ROTATIONS * 360 * eased) % 360;
    svg.style.transform = `rotate(${angle}deg)`;

    if (clamped < DURATION) {
      rafId = requestAnimationFrame(frame);
    } else {
      // animation complete: clean up and navigate
      cancelAnimationFrame(rafId);
      rafId = null;
      startTime = null;

      // remove blur and aria-busy
      document.body.classList.remove('blurred');
      btn.setAttribute('aria-busy', 'false');

      // small timeout to allow UI paint, then navigate
      setTimeout(() => {
        window.location.href = 'test.html';
      }, 40);
    }
  }

  // click handler: start the timed ease animation and blur content
  btn.addEventListener('click', (e) => {
    e.preventDefault();

    // if an animation is already running, ignore
    if (rafId) return;

    // capture current rotation as starting angle so animation continues smoothly
    const currentTransform = window.getComputedStyle(svg).transform;
    if (currentTransform && currentTransform !== 'none') {
      // parse matrix to extract rotation angle
      const values = currentTransform.split('(')[1].split(')')[0].split(',');
      const a = parseFloat(values[0]);
      const b = parseFloat(values[1]);
      // angle in degrees
      startAngle = Math.round(Math.atan2(b, a) * (180 / Math.PI));
    } else {
      startAngle = 0;
    }

    // set busy state and blur content
    btn.setAttribute('aria-busy', 'true');
    document.body.classList.add('blurred');

    // start the animation loop (will run exactly DURATION ms and then navigate)
    startTime = null;
    rafId = requestAnimationFrame(frame);
  });

  // accessibility: if page load finishes and animation not triggered, clear busy state
  window.addEventListener('load', () => {
    if (!rafId) {
      document.body.classList.remove('blurred');
      btn.setAttribute('aria-busy', 'false');
    }
  });

})();
</script>

</body>
</html>
