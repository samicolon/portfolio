<!DOCTYPE html>
<html>
<head>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
  :root {
    --bg-color: #f4f4f4;
    --text-color: #222222;
    --surface-color: #ffffff;
    --shadow-color: rgba(0,0,0,0.2);

    /* buttons get their own theme vars */
    --button-bg: #ffffff;
    --button-fg: #222222;
  }

  body.theme-dark {
    /* Dark mode = inverted from light */
    --bg-color: #282828;      /* was text */
    --text-color: #f4f4f4;    /* was background */
    --surface-color: #222222;
     --shadow-color: rgba(244, 244, 244, 0.18);

    --button-bg: var(--surface-color);
    --button-fg: #f4f4f4;
  }
  body.theme-dark .nav-button svg path {
    fill: #f4f4f4 !important;
  }

  body.theme-dark .menu-button svg rect {
  fill: #f4f4f4 !important;
  }

  html, body {
    height: 100%;
    margin: 0;
  }

  body {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    background-color: var(--bg-color);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    transition: background-color 260ms ease, color 260ms ease, filter 320ms ease;
  }

  .content {
    transition:
      filter 320ms ease,
      opacity 320ms ease,
      /* slower tray push */
      transform 560ms cubic-bezier(0.33, 0.00, 0.20, 1.00);
  }

  body.blurred .content {
    filter: blur(6px) saturate(.95) contrast(.98);
    pointer-events: none;
  }

  /* when menu tray is open, push content down (match tray height) */
  body.menu-open .content {
    transform: translateY(400px);
  }

  h1 { font-weight: 600; }

  .nav-button,
  .menu-button {
    position: fixed;
    top: 22px;
    width: 56px;
    height: 56px;
    border-radius: 20px;
    border: none;
    background-color: var(--button-bg);
    color: var(--button-fg);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0px 0px 15px -3px var(--shadow-color);
    cursor: pointer;
    padding: 0;
    z-index: 999;
    outline: none;
    transition:
      box-shadow 800ms ease-in-out,
      background-color 260ms ease,
      color 260ms ease;
  }

  .nav-button { left: 22px; }
  .menu-button { right: 22px; }

  .nav-button:hover,
  .nav-button:active,
  .menu-button:hover,
  .menu-button:active {
    transform: none;
  }

  .nav-button:focus,
  .menu-button:focus { outline: none; }

  .nav-button:focus-visible,
  .menu-button:focus-visible {
    outline: 3px solid rgba(60,60,60,0.10);
    outline-offset: 2px;
  }

  .nav-button svg {
    width: 26px;
    height: 26px;
    will-change: transform;
    display: block;
  }

  .menu-button svg {
    width: 28px;
    height: 28px;
    will-change: transform;
    display: block;
    transition: transform 200ms ease;
  }

  .nav-button[aria-busy="true"] {
    outline: none;
    box-shadow: 0px 4px 12px -3px rgba(0,0,0,0.12);
  }

  /* Gradually hide button shadows when menu is open */
  body.menu-open .nav-button,
  body.menu-open .menu-button {
    box-shadow: 0 0 0 0 rgba(0,0,0,0);
  }

  /* Menu icon ‚Üî X animation */
  .menu-button .icon-menu,
  .menu-button .icon-close {
    transform-origin: center;
    transition:
      opacity 180ms ease,
      transform 220ms ease;
  }

  .menu-button .icon-close {
    opacity: 0;
    transform: scale(0.8) rotate(-10deg);
  }

  .menu-button.open .icon-menu {
    opacity: 0;
    transform: scale(0.8);
  }

  .menu-button.open .icon-close {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }

  /* TOP TRAY MENU PANEL */
  .menu-panel {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;

    width: 100%;
    max-width: 100%;
    background-color: var(--surface-color);

    /* 56px padding so content clears underneath the floating buttons */
    padding: 56px 0 12px 0;

    /* height for pushing content (matches body.menu-open translateY) */
    height: 400px;

    z-index: 998;

    opacity: 1;

    /* start hidden above the viewport */
    transform: translateY(-100%);
    transition:
      transform 560ms cubic-bezier(0.33, 0.00, 0.20, 1.00),
      background-color 260ms ease,
      color 260ms ease;
    pointer-events: none;
    color: var(--text-color);
  }

  .menu-panel.open {
    transform: translateY(0);
    pointer-events: auto;
  }

  .menu-items-inner {
    max-width: 960px;
    margin: 0 auto;
    padding: 56px 24px 0 24px;

    display: grid;
    grid-template-columns: repeat(3, 1fr);
    column-gap: 32px;
    row-gap: 18px;
    align-items: start;
  }


  .menu-item {
    display: block;
    padding: 8px 0;
    text-align: left;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-color);
    text-decoration: none;
    transition: background-color 180ms ease, color 180ms ease;
  }

  .menu-item:hover {
    background-color: rgba(0,0,0,0.06);
  }

  /* Appearance frame (opposite of current mode) */
  .appearance-frame {
    margin-top: 24px;
    padding: 14px 16px;
    border-radius: 16px;
    

    /* Light mode: black frame with white text */
    background-color: #222222;
    color: #f4f4f4;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 16px;
    align-items: flex-start;

    transition:
      background-color 260ms ease,
      color 260ms ease,
      border-color 260ms ease;
  }

  body.theme-dark .appearance-frame {
    /* Dark mode: white frame with black text */
    background-color: #f4f4f4;
    color: #222222;
  }

  .appearance-title {
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.02em;
    text-transform: uppercase;
    opacity: 0.9;
  }

  .theme-toggle {
    min-width: 110px;
    width: 100%;
    padding: 6px 14px;
    border-radius: 999px;
    border: 1px solid transparent;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition:
      background-color 160ms ease,
      color 160ms ease,
      border-color 160ms ease;
  }

  .theme-icon {
    font-size: 13px;
  }

  .theme-text {
    font-size: 12px;
  }

  /* Light mode: frame dark, button light */
  .appearance-frame .theme-toggle {
    background-color: #f4f4f4;   /* light */
    color: #222222;              /* dark text */
    border-color: rgba(0,0,0,0.15);
  }

  .appearance-frame .theme-toggle:hover {
    background-color: #ffffff;
  }

  /* Dark mode: frame light, button dark */
  body.theme-dark .appearance-frame .theme-toggle {
    background-color: #222222;   /* dark */
    color: #f4f4f4;              /* light text */
    border-color: rgba(0,0,0,0.3);
  }

  body.theme-dark .appearance-frame .theme-toggle:hover {
    background-color: #000000;
  }

  /* Dimmed overlay under tray */
  .overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.25);
    opacity: 0;
    pointer-events: none;
    z-index: 997;
    transition: opacity 560ms ease;
  }

  body.menu-open .overlay {
    opacity: 1;
    pointer-events: auto;
  }
</style>
</head>

<body>

<!-- Back button -->
<button class="nav-button" aria-label="Back" data-screenshot-url="/mnt/data/Screenshot 2025-11-17 at 3.51.48 PM.png" aria-busy="false">
  <svg id="spin-svg" width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <path d="M25.601 10.236C28.4282 10.236 30.72 7.9449 30.72 5.11872C30.72 2.29254 28.4282 0.00146484 25.601 0.00146484C22.7739 0.00146484 20.4821 2.29254 20.4821 5.11872C20.4821 7.9449 22.7739 10.236 25.601 10.236Z" fill="#3C3C3C"/>
    <path d="M5.11902 30.7124C7.94617 30.7124 10.238 28.4213 10.238 25.5952C10.238 22.769 7.94617 20.4779 5.11902 20.4779C2.29186 20.4779 0 22.769 0 25.5952C0 28.4213 2.29186 30.7124 5.11902 30.7124Z" fill="#3C3C3C"/>
    <path d="M30.7193 25.5952C30.7193 25.4257 30.7193 25.259 30.6955 25.0922C30.6955 25.0578 30.6955 25.026 30.6955 24.9916C30.15 20.2026 23.2646 15.8055 17.9337 15.3634C17.9337 15.3634 23.54 17.5209 20.9289 23.5329C20.9103 23.5779 20.8891 23.6229 20.8732 23.6653C20.8574 23.7076 20.8494 23.7182 20.8388 23.7474C20.608 24.3379 20.4894 24.9664 20.4893 25.6005C20.487 26.3549 20.6521 27.1004 20.9727 27.7833C21.2932 28.4663 21.7612 29.0697 22.343 29.5502C22.5979 29.7578 22.8709 29.942 23.1587 30.1009C23.4521 30.2583 23.7598 30.3877 24.0776 30.4874C24.844 30.7261 25.6557 30.7813 26.4474 30.6485C27.239 30.5157 27.9883 30.1987 28.6348 29.723C29.2813 29.2474 29.8068 28.6264 30.1689 27.9102C30.531 27.1941 30.7195 26.4029 30.7193 25.6005V25.5952Z" fill="#3C3C3C"/>
    <path d="M9.80356 7.18341C9.82474 7.1384 9.84328 7.0934 9.86182 7.05104C9.88036 7.00869 9.883 6.9981 9.89624 6.96898C10.1684 6.26817 10.2827 5.51603 10.2311 4.76605C10.1795 4.01607 9.96321 3.28666 9.59765 2.6297C9.23209 1.97275 8.72622 1.40437 8.11601 0.965C7.50581 0.525628 6.80627 0.22605 6.06712 0.0875704C5.32797 -0.0509097 4.56737 -0.0248895 3.83942 0.163779C3.11147 0.352447 2.43405 0.69913 1.85532 1.17917C1.27659 1.65922 0.810772 2.26083 0.490993 2.94123C0.171214 3.62164 0.00532578 4.36412 0.00512695 5.11587C0.00512695 5.2853 0.00512655 5.45208 0.0316088 5.61886C0.0316088 5.65327 0.0316096 5.68504 0.0448507 5.71945C0.574496 10.5084 7.45988 14.9056 12.804 15.3477C12.7987 15.3583 7.19241 13.1954 9.80356 7.18341Z" fill="#3C3C3C"/>
  </svg>
</button>

<!-- Menu button (right side) -->
<button class="menu-button" aria-label="Open menu" aria-expanded="false">
  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
    <!-- Hamburger icon -->
    <g class="icon-menu">
      <rect x="4" y="6" width="16" height="2" rx="1" />
      <rect x="4" y="11" width="16" height="2" rx="1" />
      <rect x="4" y="16" width="16" height="2" rx="1" />
    </g>
    <!-- X icon -->
    <g class="icon-close">
      <rect x="5" y="11" width="14" height="2" rx="1" transform="rotate(45 12 12)" />
      <rect x="5" y="11" width="14" height="2" rx="1" transform="rotate(-45 12 12)" />
    </g>
  </svg>
</button>

<!-- Top tray menu panel -->
<nav class="menu-panel" aria-label="Main menu">
  <div class="menu-items-inner">

  <!-- Column 1 -->
  <div class="menu-col">
    <a href="#work" class="menu-item">Work</a>
    <a href="#about" class="menu-item">About</a>
    <a href="#contact" class="menu-item">Contact</a>
  </div>

  <!-- Column 2 (empty for now ‚Äî expandable for future sections) -->
  <div class="menu-col">
    <!-- Add anything you want later -->
  </div>

  <!-- Column 3 -->
  <div class="menu-col">
    <div class="appearance-frame">
      <div class="appearance-title">Appearance</div>
      <button type="button" class="theme-toggle" aria-pressed="false">
        <span class="theme-icon" aria-hidden="true">‚òÄÔ∏è</span>
        <span class="theme-text">Light</span>
      </button>
    </div>
  </div>

</div>
</nav>

<!-- Overlay under tray -->
<div class="overlay" aria-hidden="true"></div>

<main class="content">
  <h1>Come back later!</h1>
</main>

<script>
(function () {
  const svg = document.getElementById('spin-svg');
  const btn = svg.closest('.nav-button');

  const screenshotUrl = btn.dataset.screenshotUrl || '/mnt/data/Screenshot 2025-11-17 at 3.51.48 PM.png';

  let rafId = null;
  let startTime = null;
  let startAngle = 0;

  const DURATION = 2000;
  const TOTAL_ROTATIONS = 3;

  function easeInOutCubic(t) {
    return t < 0.5
      ? 4 * t * t * t
      : 1 - Math.pow(-2 * t + 2, 3) / 2;
  }

  function frame(now) {
    if (!startTime) startTime = now;
    const elapsed = now - startTime;
    const clamped = Math.min(elapsed, DURATION);
    const progress = clamped / DURATION;
    const eased = easeInOutCubic(progress);

    const angle = (startAngle + TOTAL_ROTATIONS * 360 * eased) % 360;
    svg.style.transform = `rotate(${angle}deg)`;

    if (clamped < DURATION) {
      rafId = requestAnimationFrame(frame);
    } else {
      cancelAnimationFrame(rafId);
      rafId = null;
      startTime = null;

      document.body.classList.remove('blurred');
      btn.setAttribute('aria-busy', 'false');

      setTimeout(() => {
        window.location.href = 'test.html';
      }, 40);
    }
  }

  btn.addEventListener('click', (e) => {
    e.preventDefault();

    if (rafId) return;

    const currentTransform = window.getComputedStyle(svg).transform;
    if (currentTransform && currentTransform !== 'none') {
      const values = currentTransform.split('(')[1].split(')')[0].split(',');
      const a = parseFloat(values[0]);
      const b = parseFloat(values[1]);
      startAngle = Math.round(Math.atan2(b, a) * (180 / Math.PI));
    } else {
      startAngle = 0;
    }

    btn.setAttribute('aria-busy', 'true');
    document.body.classList.add('blurred');

    startTime = null;
    rafId = requestAnimationFrame(frame);
  });

  window.addEventListener('load', () => {
    if (!rafId) {
      document.body.classList.remove('blurred');
      btn.setAttribute('aria-busy', 'false');
    }
  });

  // Menu logic
  const menuBtn = document.querySelector('.menu-button');
  const menuPanel = document.querySelector('.menu-panel');

  function closeMenu() {
    menuPanel.classList.remove('open');
    menuBtn.setAttribute('aria-expanded', 'false');
    menuBtn.classList.remove('open');
    document.body.classList.remove('menu-open');
  }

  menuBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    const isOpen = !menuPanel.classList.contains('open');

    menuPanel.classList.toggle('open', isOpen);
    menuBtn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
    menuBtn.classList.toggle('open', isOpen);
    document.body.classList.toggle('menu-open', isOpen);
  });

  document.addEventListener('click', (e) => {
    if (!menuPanel.classList.contains('open')) return;
    if (menuPanel.contains(e.target)) return;
    if (menuBtn.contains(e.target)) return;
    closeMenu();
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeMenu();
    }
  });

  // Theme toggle with persistence + icon/text swap
  const themeToggleBtn = document.querySelector('.theme-toggle');
  const themeIcon = themeToggleBtn.querySelector('.theme-icon');
  const themeText = themeToggleBtn.querySelector('.theme-text');

 function setTheme(isDark) {
  // isDark = "dark theme is currently active"
  document.body.classList.toggle('theme-dark', isDark);
  themeToggleBtn.setAttribute('aria-pressed', isDark ? 'true' : 'false');

  if (isDark) {
    // We are IN dark mode now ‚Üí button offers Light
    themeIcon.textContent = '‚òÄÔ∏è';
    themeText.textContent = 'Light';
    localStorage.setItem('theme', 'dark');
  } else {
    // We are IN light mode now ‚Üí button offers Dark
    themeIcon.textContent = 'üåô';
    themeText.textContent = 'Dark';
    localStorage.setItem('theme', 'light');
  }
}


  // Initialize from localStorage (default: light)
  const storedTheme = localStorage.getItem('theme');
  if (storedTheme === 'dark') {
    setTheme(true);
  } else {
    setTheme(false);
  }

  themeToggleBtn.addEventListener('click', () => {
    const isDark = !document.body.classList.contains('theme-dark');
    setTheme(isDark);
  });
})();
</script>

</body>
</html>
